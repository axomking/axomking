<?php
// Check if the form is submitted
if ($_SERVER["REQUEST_METHOD"] == "POST") {
    // Define the file name for the CSV
    $file_name = "form_data.csv";

    // Open the file in write mode (create it if it doesn't exist)
    $file = fopen($file_name, "w");

    // Write the headers to the CSV file
    fputcsv($file, array('Name', 'Email', 'Message'));

    // Extract form data
    $name = $_POST['name'];
    $email = $_POST['email'];
    $message = $_POST['message'];

    // Write form data to CSV
    fputcsv($file, array($name, $email, $message));

    // Close the file
    fclose($file);

    // Provide download link to the generated CSV
    echo "<a href='$file_name' download>Download CSV</a>";
}
?>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Export Form Data to CSV</title>
</head>
<body>
    <h2>Export Form Data to CSV</h2>
    <form method="post" action="<?php echo htmlspecialchars($_SERVER["PHP_SELF"]);?>">
        <label for="name">Name:</label><br>
        <input type="text" id="name" name="name"><br>
        <label for="email">Email:</label><br>
        <input type="email" id="email" name="email"><br>
        <label for="message">Message:</label><br>
        <textarea id="message" name="message"></textarea><br><br>
        <input type="submit" value="Submit">
    </form>
</body>
</html>
